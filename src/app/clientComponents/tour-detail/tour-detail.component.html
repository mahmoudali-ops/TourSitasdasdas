<!-- Tour Header Section - الصورة فقط -->
@if (DetailedTour()) {
  <section class="category-hero-section-new">
    <div class="hero-img-wrapper-new">
      <img
        [src]="DetailedTour()?.imageCover"
        [alt]="DetailedTour()?.titles"
        loading="lazy"
        class="hero-img-new"
      />
    </div>

    <div class="hero-info-new container">
      @for (word of DetailedTour()?.titles?.split(' '); track $index) {
        <span class="word">{{ word }}</span>
      }
    </div>
    
    
    
    
    
  </section>
}

  
  @if (DetailedTour()) {
  <div class="container main-content">
    <div class="row">
      <!-- Main Content - اليسار -->
      <div class="col-lg-8">
        <!-- Tour Description -->
        <section class="tour-description-section mb-5">
          <div class="info-card">
            <h2 class="section-title">{{ 'TOUR.DESCRIPTION' | t }}</h2>
            <p class="description-text"> {{ DetailedTour()?.descriptions }}</p>
            
            <div class="tour-info-grid">
              <div class="info-item">
                <i class="fas fa-clock"></i>
                <div>
                  <span class="info-label">{{ 'TOUR.DURATION' | t }}</span>
                  <span class="info-value"> {{ DetailedTour()?.duration }} hours</span>
                </div>
              </div>
              <div class="info-item">
                <i class="fas fa-map-marker-alt"></i>
                <div>
                  <span class="info-label">{{ 'TOUR.START_LOCATION' | t }}</span>
                  <span class="info-value"> {{ DetailedTour()?.startLocation }}</span>
                </div>
              </div>
              <div class="info-item">
                <i class="fas fa-flag-checkered"></i>
                <div>
                  <span class="info-label">{{ 'TOUR.END_LOCATION' | t }}</span>
                  <span class="info-value"> {{ DetailedTour()?.endLocation }}</span>
                </div>
              </div>
              <div class="info-item">
                <i class="fas fa-language"></i>
                <div>
                  <span class="info-label">{{ 'TOUR.LANGUAGES' | t }}</span>
                  <span class="info-value"> {{ DetailedTour()?.languageOptions }}</span>
                </div>
              </div>
            </div>
          </div>
        </section>
  
        <!-- Image Carousel -->
        @if (DetailedTour()?.tourImgs && DetailedTour()!.tourImgs.length > 0) {
        <section class="carousel-section mb-5">
          <h2 class="section-title">{{ 'TOUR.GALLERY' | t }}</h2>
          <div class="carousel-container">
            <div class="carousel-slide">
              <img 
                [src]="DetailedTour()!.tourImgs[currentCarouselIndex()].imageCarouselUrl" 
                [alt]="DetailedTour()!.tourImgs[currentCarouselIndex()].titles" 
                loading="lazy"
                class="carousel-image"
              />
              <button class="carousel-btn prev-btn" (click)="prevCarouselImage()">
                <i class="fas fa-chevron-left"></i>
              </button>
              <button class="carousel-btn next-btn" (click)="nextCarouselImage()">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="carousel-indicators">
              @for (img of DetailedTour()?.tourImgs; track img.id; let i = $index) {
              <button 
                class="indicator {{ i === currentCarouselIndex() ? 'active' : '' }}"
                (click)="goToCarouselImage(i)"
              ></button>
              }
            </div>
          </div>
        </section>
        }
  
        <!-- Tour Highlights -->
        @if (DetailedTour()?.highlights && DetailedTour()!.highlights.length > 0) {
        <section class="mb-5">
          <h2 class="section-title">{{ 'TOUR.HIGHLIGHTS' | t }}</h2>
          <div class="info-card">
            @for (highlight of DetailedTour()?.highlights; track highlight.text) {
            <div class="highlight-item">
              <i class="fas fa-star"></i>
              <div>
                <strong>{{ splitHighlightText(highlight.text).title }}</strong>
                <p>{{ splitHighlightText(highlight.text).description }}</p>
              </div>
            </div>
            }
          </div>
        </section>
        }
        
        <!-- What's Included -->
        @if (DetailedTour()?.includedItems && DetailedTour()!.includedItems.length > 0) {
        <section class="mb-5">
          <h2 class="section-title">{{ 'TOUR.INCLUDED' | t }}</h2>
          <div class="info-card">
            @for (item of DetailedTour()?.includedItems; track item.text) {
            <div class="included-item">
              <i class="fas fa-check-circle"></i>
              <div>
                <strong>{{ splitItemText(item.text).title }}</strong>
                <p>{{ splitItemText(item.text).description }}</p>
              </div>
            </div>
            }
          </div>
        </section>
        }
        
        <!-- What's Not Included -->
      @if (DetailedTour()?.notIncludedItems && DetailedTour()!.notIncludedItems.length > 0) {
  <section class="not-included-section mb-5">
    <h2 class="section-title">{{ 'TOUR.NOT_INCLUDED' | t }}</h2>
    <div class="not-included-card">
      @for (item of DetailedTour()?.notIncludedItems; track item.text) {
        <div class="not-included-point">
          <i class="fas fa-times-circle"></i>
          <div>
            <strong>{{ splitItemText(item.text).title }}</strong>
            <p>{{ splitItemText(item.text).description }}</p>
          </div>
        </div>
      }
    </div>
  </section>
}
<section class="gold-info-section mb-5">
  <h2 class="section-title">{{ 'INFO.KNEW_BEFORE_GO' | t }}</h2>

  <ul class="info-list">
    <li>
      <i class="fas fa-info-circle"></i>
      {{ 'INFO.LIST.HOTEL_TRANSFERS' | t }}
    </li>

    <li>
      <i class="fas fa-user-check"></i>
      {{ 'INFO.LIST.BEGINNERS_SNORKELERS' | t }}
    </li>

    <li>
      <i class="fas fa-utensils"></i>
      {{ 'INFO.LIST.BUFFET_LUNCH' | t }}
    </li>

    <li>
      <i class="fas fa-child"></i>
      {{ 'INFO.LIST.CHILDREN_SUPERVISION' | t }}
    </li>
  </ul>
</section>


<section class="gold-info-section mb-5">
  <h2 class="section-title">{{ 'PAYMENT.TITLE' | t }}</h2>

  <ul class="info-list">
    <li>
      <i class="fas fa-credit-card"></i>
      {{ 'PAYMENT.LIST.RESERVE_PAY_LATER' | t }}
    </li>

    <li>
      <i class="fas fa-coins"></i>
      {{ 'PAYMENT.LIST.CURRENCY' | t }}
    </li>

    <li>
      <i class="fas fa-tags"></i>
      {{ 'PAYMENT.LIST.PRICES' | t }}
    </li>

    <li>
      <i class="fas fa-award"></i>
      {{ 'PAYMENT.LIST.QUALITY' | t }}
    </li>
  </ul>
</section>

<section class="gold-video-section mb-5">
  <h2 class="section-title">{{ 'TOUR.VIDEO_TITLE' | t }}</h2>

  <div class="video-wrapper">
    <iframe 
    [src]="DetailedTour()?.linkVideo | safeUrl"
    frameborder="0" 
      allowfullscreen>
    </iframe>
  </div>
</section>


      </div>
      
      <!-- Booking  Form - اليمين -->
      <div class="col-lg-4">
        <div class="booking-card">
          <div class="booking-header">
            <div class="booking-price">€ {{ DetailedTour()?.price }}</div>
            <span class="price-note">per person</span>
          </div>
          




          <form class="booking-form" [formGroup]="BookingForm" (ngSubmit)="FormSubmited()">
  
            <div class="form-group mb-3">
              <label for="FullName" class="form-label">
                <i class="fas fa-user"></i> Full Name
              </label>
              <input [ngClass]="{
                      'is-invalid': BookingForm.get('FullName')?.invalid && (BookingForm.get('FullName')?.touched || BookingForm.get('FullName')?.dirty),
                      'is-valid': BookingForm.get('FullName')?.valid && (BookingForm.get('FullName')?.touched || BookingForm.get('FullName')?.dirty)
                  }" id="FullName" type="text" class="form-control" formControlName="FullName" >
              @if(BookingForm.get('FullName')?.invalid && (BookingForm.get('FullName')?.touched||BookingForm.get('FullName')?.dirty)){
                <div class="text-danger small mt-1">Full Name is required (min 3 chars).</div>
              }
            </div>
          
            <div class="form-group mb-3">
              <label for="EmailAddress" class="form-label">
                <i class="fas fa-envelope"></i> Email Address
              </label>
              <input [ngClass]="{
                      'is-invalid': BookingForm.get('EmailAddress')?.invalid && (BookingForm.get('EmailAddress')?.touched || BookingForm.get('EmailAddress')?.dirty),
                      'is-valid': BookingForm.get('EmailAddress')?.valid && (BookingForm.get('EmailAddress')?.touched || BookingForm.get('EmailAddress')?.dirty)
                  }" id="EmailAddress" type="email" class="form-control" formControlName="EmailAddress">
              @if(BookingForm.get('EmailAddress')?.invalid && (BookingForm.get('EmailAddress')?.touched||BookingForm.get('EmailAddress')?.dirty)){
                <div class="text-danger small mt-1">Valid Email is required.</div>
              }
            </div>
          
            <div class="form-group mb-3">
              <label for="Message" class="form-label">
                <i class="fas fa-comment-alt"></i> Any comments !   
              </label>
              <input [ngClass]="{
                      'is-invalid': BookingForm.get('Message')?.invalid && (BookingForm.get('Message')?.touched || BookingForm.get('Message')?.dirty),
                      'is-valid': BookingForm.get('Message')?.valid && (BookingForm.get('Message')?.touched || BookingForm.get('Message')?.dirty)
                  }" id="Message" type="text" class="form-control" formControlName="Message">
              @if(BookingForm.get('Message')?.invalid && (BookingForm.get('Message')?.touched||BookingForm.get('Message')?.dirty)){
                <div class="text-danger small mt-1">Details of Booking is required</div>
              }
            </div>


            <div class="form-group mb-3 col-half">
              <label class="form-label">
                <i class="fas fa-user"></i> Hotel Name
              </label>
              <input 
                [ngClass]="{
                  'is-invalid': BookingForm.get('HotelName')?.invalid && (BookingForm.get('HotelName')?.touched || BookingForm.get('HotelName')?.dirty),
                  'is-valid': BookingForm.get('HotelName')?.valid && (BookingForm.get('HotelName')?.touched || BookingForm.get('HotelName')?.dirty)
                }"
                type="text" 
                class="form-control" 
                formControlName="HotelName"
              >
            </div> 
          
            <div class="form-group mb-3 col-half">
              <label class="form-label">
                <i class="fas fa-child"></i> Room Number
              </label>
              <input 
                [ngClass]="{
                  'is-invalid': BookingForm.get('RoomNumber')?.invalid && (BookingForm.get('RoomNumber')?.touched || BookingForm.get('RoomNumber')?.dirty),
                  'is-valid': BookingForm.get('RoomNumber')?.valid && (BookingForm.get('RoomNumber')?.touched || BookingForm.get('RoomNumber')?.dirty)
                }"
                type="number" 
                class="form-control" 
                formControlName="RoomNumber"
              >
      
            </div>
            
            <div class="row two-cols">

              <div class="form-group mb-3 col-half">
                <label class="form-label">
                  <i class="fas fa-user"></i> Adults (10+ Years):
                </label>
                <input 
                  [ngClass]="{
                    'is-invalid': BookingForm.get('AdultsNumber')?.invalid && (BookingForm.get('AdultsNumber')?.touched || BookingForm.get('AdultsNumber')?.dirty),
                    'is-valid': BookingForm.get('AdultsNumber')?.valid && (BookingForm.get('AdultsNumber')?.touched || BookingForm.get('AdultsNumber')?.dirty)
                  }"
                  type="number" 
                  class="form-control" 
                  formControlName="AdultsNumber"
                >
                @if(BookingForm.get('AdultsNumber')?.invalid && (BookingForm.get('AdultsNumber')?.touched||BookingForm.get('AdultsNumber')?.dirty)){
                  <div class="text-danger small mt-1">Adults Number is required</div>
                }
              </div>
            
              <div class="form-group mb-3 col-half">
                <label class="form-label">
                  <i class="fas fa-child"></i> Child (5-10 Years):
                </label>
                <input 
                  [ngClass]="{
                    'is-invalid': BookingForm.get('ChildernNumber')?.invalid && (BookingForm.get('ChildernNumber')?.touched || BookingForm.get('ChildernNumber')?.dirty),
                    'is-valid': BookingForm.get('ChildernNumber')?.valid && (BookingForm.get('ChildernNumber')?.touched || BookingForm.get('ChildernNumber')?.dirty)
                  }"
                  type="number" 
                  class="form-control" 
                  formControlName="ChildernNumber"
                >
                @if(BookingForm.get('ChildernNumber')?.invalid && (BookingForm.get('ChildernNumber')?.touched||BookingForm.get('ChildernNumber')?.dirty)){
                  <div class="text-danger small mt-1">Children Number is required</div>
                }
              </div>
            
            </div>

            <div class="form-group mb-3">
              <label for="BookingDate" class="form-label">
                <i class="fas fa-calendar-alt"></i> Date
              </label>
              <input [ngClass]="{
                      'is-invalid': BookingForm.get('BookingDate')?.invalid && (BookingForm.get('BookingDate')?.touched || BookingForm.get('BookingDate')?.dirty),
                      'is-valid': BookingForm.get('BookingDate')?.valid && (BookingForm.get('BookingDate')?.touched || BookingForm.get('BookingDate')?.dirty)
                  }" id="BookingDate" type="date" class="form-control" formControlName="BookingDate">
              @if(BookingForm.get('BookingDate')?.invalid && (BookingForm.get('BookingDate')?.touched||BookingForm.get('BookingDate')?.dirty)){
                <div class="text-danger small mt-1">Date of Booking is required</div>
              }
            </div>

            <button class="btn-book">
              <span class="text">{{ 'BUTTON.BOOK_NOW' | t }}</span>
              <span class="icons">
                <i class="fas fa-plane"></i>
                <i class="fa-solid fa-person-walking-luggage"></i>
                <i class="fa-solid fa-suitcase-rolling"></i>
              </span>
            </button>
            
            
            
          
            <div class="security-notice">
              <i class="fas fa-shield-alt"></i>
              <span>{{ 'RESERVATION.PROTECTED' | t }}</span>
            </div>
          </form>
          
          
          
        </div>
      </div>
    </div>
  </div>
  }
  
  <!-- Loading State -->
  @if (!DetailedTour()) {
  <div class="container text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading tour details...</p>
  </div>
  }
